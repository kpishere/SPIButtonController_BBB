# SPI Button Controller Configuration
# This file defines how the daemon monitors SPI registers and responds to value changes

spi:
  # SPI device path (typically /dev/spidev<bus>.<cs>)
  device: /dev/spidev0.0
  
  # SPI bus number
  bus: 0
  
  # Chip select line
  chip_select: 0
  
  # SPI clock speed in Hz
  speed_hz: 1000000  # 1 MHz
  
  # SPI mode (0-3)
  mode: 0

# Polling and debounce configuration
polling:
  # How often to poll the registers (in milliseconds)
  interval_ms: 100
  
  # Debounce interval to prevent rapid re-triggering (in milliseconds)
  debounce_ms: 50

# Register mappings and value triggers
registers:
  - register_address: 0x00
    name: "Button State Register"
    value_triggers:
      - value: 0x01
        mask: 0x01
        description: "Button 1 pressed"
        command: "echo 'Button 1 pressed' && logger -t spi-controller 'Button 1 pressed'"
      
      - value: 0x02
        mask: 0x02
        description: "Button 2 pressed"
        command: "echo 'Button 2 pressed' && logger -t spi-controller 'Button 2 pressed'"
      
      - value: 0x04
        mask: 0x04
        description: "Button 3 pressed"
        command: "echo 'Button 3 pressed' && logger -t spi-controller 'Button 3 pressed'"

  - register_address: 0x01
    name: "LED Control Register"
    value_triggers:
      - value: 0x00
        description: "All LEDs off"
        command: "logger -t spi-controller 'LED state: all off'"
      
      - value: 0xFF
        description: "All LEDs on"
        command: "logger -t spi-controller 'LED state: all on'"

  - register_address: 0x02
    name: "Status Register"
    value_triggers:
      - value: 0x01
        description: "Device ready"
        command: "logger -t spi-controller 'Device status: ready'"
      
      - value: 0x02
        description: "Device error"
        command: "logger -t spi-controller 'Device status: error'"
